------------------------------------------------------------------------------
HGIMG4 REFERENCE MANUAL                High Performance Graphic Image Plugin  
ＨＳＰ拡張ランタイムリファレンス      copyright 2001-2013 (c) onion software  
------------------------------------------------------------------------------

・はじめに

	HGIMG4は、Hot Soup Processor ver3.4以降とともに使用することで、
	画面の描画に関する様々な機能拡張を提供します。

	HGIMG4の特徴

	・OpenGL/ESによる描画、シェーダー言語サポート
	・シーン管理と統合化された物理エンジン(Bullet)サポート
	・FBX,Collada形式のモデルファイル読み込み、アニメーションサポート
	・マルチテクスチャ、バップマップ、ハイトマップ、LODをサポート
	・フォントデータ(TTF)のレンダリングサポート
	・オフスクリーンレンダリング及び各種ポストエフェクトサポート
	・WindowsだけでなくiOS,Android上での動作をサポート予定
	・HSP及びHSP3Dishと同様のライセンス規約、オープンソース 

	HGIMG4は、Windows2000以降で、OpenGLバージョン3.1以上がインストールされた環境で動作します。


・インストール

	HGIMG4は、以下のようなファイル構成になっています。

		hgimg4.txt (このファイル)
		hsp3gp.exe (実行用ランタイム)

		commonフォルダ (HGIMG4ヘッダファイル)
		hsphelpフォルダ (HGIMG4ヘルプファイル)
		runtimeフォルダ (HGIMG4カスタムランタイム)
		sampleフォルダ (HGIMG4サンプルスクリプト & データ)

	HGIMG4を使用したスクリプトを作成する場合には、スクリプトの先頭に
	必ず「#include "hgimg4.as"」という行を追加してください。
	以上で、HSPの機能が拡張され、このリファレンスで説明をしている命令を
	使用することができるようになります。
	まず最初に、付属のサンプルスクリプトを実行してみてください。
	拡張された機能の簡単な使用例を見ることができるはずです。
	サンプルスクリプトは、HSPインストールフォルダ以下のsample/hgimg4
	に用意されています。


・注意点

	HGIMG4は、外部DLLファイルによる拡張プラグインではありません。
	HSP3DISHの機能を内包したランタイムファイルとして提供されています。
	必ず、HGIMG4のランタイムに対応したバージョンのコンパイラ
	(hspcmp.dll)やスクリプトエディタをご使用下さい。
	また、HSP3は実行ランタイムに対応したコードジェネレーター(hspcmp.dll)
	をご使用ください。(HSP3.4以上を推奨)


・命令一覧(メイン)

	setcls

	gpreset
	gpsetprm
	gpgetprm
	gppostefx
	gpuselight

	gpdelobj
	gpcolormat
	gptexmat
	gpusermat
	gpclone
	gpload
	gpmesh
	gpfloor
	gpbox
	gpspr
	gplight
	setobjmode
	gplookat
	gppbind


・命令一覧(描画命令)

	celputm
	gpdraw


・命令一覧(パラメーター設定)

	selmoc id, mocofs				MOC情報を設定
	selpos id					移動座標をMOC情報に設定
	selang id					回転角度をMOC情報に設定
	selscale id					スケールをMOC情報に設定
	seldir id					移動量をMOC情報に設定

	objset1 ofs,x					MOC情報を設定
	objadd1 ofs,x					MOC情報を加算
	objsetf1 ofs,x					MOC情報を設定
	objaddf1 ofs,x					MOC情報を加算
	objset1r ofs,x					MOC情報を設定

	objset2 ofs,x,y					MOC情報を設定
	objadd2 ofs,x,y					MOC情報を加算
	objsetf2 ofs,x,y				MOC情報を設定
	objaddf2 ofs,x,y				MOC情報を加算
	objset2r ofs,x,y				MOC情報を設定

	objset3 x,y,z					MOC情報を設定
	objadd3 x,y,z					MOC情報を加算
	objsetf3 x,y,z					MOC情報を設定
	objaddf3 x,y,z					MOC情報を加算
	objset3r x,y,z					MOC情報を設定

	objgetfv fv					MOC情報を取得
	objsetfv fv					MOC情報を設定
	objaddfv fv					MOC情報を加算
	objgetv v					MOC情報を整数値で取得
	objsetv v					MOC情報を整数値で設定
	objgetstr sval					MOC情報を文字列で取得

	fvset fv,x,y,z					ベクトル設定
	fvseti fv,x,y,z					整数値からベクトル設定
	fvadd fv,x,y,z					ベクトル加算
	fvsub fv,x,y,z					ベクトル減算
	fvmul fv,x,y,z					ベクトル乗算
	fvdiv fv,x,y,z					ベクトル除算
	fvdir fv,x,y,z					ベクトル回転
	fvmin fv,x,y,z					ベクトル最大値
	fvmax fv,x,y,z					ベクトル最小値
	fvouter fv,x,y,z				ベクトル外積
	fvinner fv,x,y,z				ベクトル内積
	fvface fv,x,y,z					座標から角度を得る
	fvunit fv						ベクトル正規化
	fsin fval,rot					サインを求める
	fcos fval,rot					コサインを求める
	fsqr fval,prm					平方根を求める
	froti fval,prm					整数値角度を小数値に変換

	fv2str fv					ベクトルを文字列に変換
	str2fv fv,"x,y,z"				文字列をベクトルに変換


・HGIMG4の使用方法

	HGIMG4は、Windows上で動作するHSP3のスクリプトエディタなど通常のHSP環境をそのまま 使用して開発を行ないます。
	必ずHSP3.4以降のHSPで作成を行なってください。 HGIMG4環境で動作するスクリプトを作成する場合は、
	最初の行に、以下のコードを追加する必要があります。

	#include "hgimg4.as"

	HGIMG4は、HSP3Dishランタイムを拡張する形で実装されています。
	HSP3Dishが持つ命令をすべてサポートしているほか、いくつかの拡張が行なわれています。
	ただし、HSP3Dishによる制約(外部DLL/プラグインの使用不可、出力は単一のスクリーンなど)も
	同様に発生します。基本的な文法、プログラム制御はHSP3と同様です。
	HSP3Dishについての詳細は、HSP3Dish プログラミングマニュアル・基本仕様ガイド(hsp3dish_prog.htm)を
	参照してください。


・初期化と描画の方法

	初期化を以下の手順に従って行なって下さい。

	;------------------------------------------------------------------
	gpreset						; hgimgの初期化
	;------------------------------------------------------------------

	gpreset命令は、システム全初期化を行なう命令です。
	初期化はいつでも、何度でも行なうことが可能です。

	初期化が終わったら、いつでも登録されているオブジェクトを表示可能な
	状態になります。
	HGIMG4では、描画を以下のようなループで行ないます。

	;------------------------------------------------------------------
	*main
		;	描画メイン
		;
		redraw 0			; 描画開始(画面クリア)

		;	
		;	各種描画を行なう
		;	

		redraw 1			; 描画終了
		await 1000/60			; 時間待ち(60フレーム/秒)
		goto *main
	;------------------------------------------------------------------

	画面の書き換えに関するソースは、redraw 0で描画開始を知らせて、
	redraw 1により描画終了タイミングを知らせるようにしてください。
	通常のHSP3とは違い、「redraw 0」を指定することにより、スクリーンが
	一旦クリアされます。

	描画を開始してから、box、mes等の描画命令を自由に記述することができます。
	その後、await命令で時間待ち(ウェイト)をします。「await 10」の場合は、
	最低でも10msだけの待ち時間を入れます。

	これらのルールは、HSP3Dishと同様です。
	2D描画に使用可能な描画命令と仕様についても、基本的にHSP3Dishと同じになっています。
	サポートされている命令の詳細は、support_cmds.txtを参照してください。


・3D動作の概要

	HGIMG4は、シンプルで柔軟性のある3D描画システムを提供します。


・現バージョンでの注意点

	以下の機能は未実装です。将来のバージョンでサポートされる予定です。

	・line,pset命令

	・モデルアニメーションの各種コントロール
	・マテリアルパラメーターの詳細設定
	・コリジョンと物理パラメーターの詳細設定
	・ポストエフェクト(マルチパスレンダリング)に関する設定
	・日本語フォントのサポート
	・マルチテクスチャ、バップマップ、ハイトマップ、LODサポート
	・マルチプラットフォーム化(iOS、Android)


・ライセンスについて

ユーザーがHGIMG4を使って作成したオリジナルのソフトウェア(実行ファイル)の権利は、それを作成したユーザーに属します。
ユーザーがHGIMG4を使って作成したオリジナルのソフトウェア(実行ファイル)を、
自由に通信、即売会、店頭などで展示、配布、販売することができます。
ライセンス料は必要ありません。
HGIMG4とそのソースコードは、HSP開発セットと同様の修正BSDライセンスが適用されます。

HGIMG4は以下のライブラリを使用して開発されています。

GamePlay3D v1.7.0
http://www.gameplay3d.org

Bullet Collision Detection and Physics Library
Advanced Micro Devices, Inc.
http://bulletphysics.org

OpenHSP
Copyright (C) 1997-2013, ONION Software/onitama.
http://hsp.tv

Disclaimer

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, 
INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A 
PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT 
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, 
TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR 
OTHER DEALINGS IN THE SOFTWARE.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer. 
Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. 
Neither the name of the Onion Software nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission. 

ソースコード形式かバイナリ形式か、変更するかしないかを問わず、以下の条件を満たす場合に限り、再頒布および使用が許可されます。 

・ソースコードを再頒布する場合、上記の著作権表示、本条件一覧、および下記免責条項を含めること。 
・バイナリ形式で再頒布する場合、頒布物に付属のドキュメント等の資料に、上記の著作権表示、本条件一覧、および下記免責条項を含めること。 
・書面による特別の許可なしに、本ソフトウェアから派生した製品の宣伝または販売促進に、Onion Softwareの名前またはコントリビューターの名前を使用してはならない。 

本ソフトウェアは、著作権者およびコントリビューターによって「現状のまま」提供されており、明示黙示を問わず、商業的な使用可能性、および特定の目的に対する適合性に関する暗黙の保証も含め、またそれに限定されない、いかなる保証もありません。著作権者もコントリビューターも、事由のいかんを問わず、 損害発生の原因いかんを問わず、かつ責任の根拠が契約であるか厳格責任であるか（過失その他の）不法行為であるかを問わず、仮にそのような損害が発生する可能性を知らされていたとしても、本ソフトウェアの使用によって発生した（代替品または代用サービスの調達、使用の喪失、データの喪失、利益の喪失、業務の中断も含め、またそれに限定されない）直接損害、間接損害、偶発的な損害、特別損害、懲罰的損害、または結果損害について、一切責任を負わないものとします。 


-------------------------------------------------------------------------------
                                                HSP users manual / end of file 
-------------------------------------------------------------------------------
